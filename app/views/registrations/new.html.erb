<script type="text/javascript">
    $(document).ready(function(){

        $("#user_activity").change(function(){
            if($("#user_activity option:selected").val() == 'other'){
                $("#user_other_main_activity").show();
            }
            else{
                $("#user_other_main_activity").hide();
            };
        });

        $(".checkbox_first_answer").click(function(){
           if ($(this).is(':checked')){
               $("#user_other_first_answer").show();
            }
            else{
               $("#user_other_first_answer").hide();
            }
           //console.log ("click first answer");
        });

        $(".checkbox_second_answer").click(function(){
            if ($(this).is(':checked')){
                $("#user_other_second_answer").show();
            }
            else{
                $("#user_other_second_answer").hide();
            }
            console.log ("click second answer");
        });

        $(".checkbox_third_answer").click(function(){

            if ($(this).is(':checked')){
                $("#user_other_third_answer").show();
            }
            else{
                $("#user_other_third_answer").hide();
            }
            console.log ("click third answer");
        });


        $("#user_other_main_activity").hide();
        $("#user_other_first_answer").hide();
        $("#user_other_second_answer").hide();
        $("#user_other_third_answer").hide();

         $(".user_new").validate({
		  errorPlacement: function(error, element) {
		    error.appendTo( element.parent("div").next("div") );
		  },			          
	   	    rules: {
		      "user[name]": {
		                required:true
		                },
		      "user[surname]": {
		                required:true
		                },
		      "user[organization]": {
		                required:true
		                },
		      "user[sector]": {
		                required:true
		                },		                
		      "user[activity]": {
		                required:true
		                },
		      "user[phone]": {
		                required:true
		                },
		      "user[phone]": {
		                required:true
		                },
		      "user[email]": {
		                required:true
		                },
		      "user[password]": {
		                required:true
		                },		                
		      "user[password_confirmation]": {
		                required:true
		                }
		    },
			messages: {
              "user[name]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[surname]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[organization]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[sector]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },                    
              "user[activity]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[phone]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[phone]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[email]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[password]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    },
              "user[password_confirmation]": {
                    required:"<%=_('This field is mandatory').html_safe%>"
                    }
			}		    
	       });


    });
</script>
<style type="text/css">
.error {
  font-size:10px;
}
</style> 
<h1 class="green"><%=_('Register to use LCAtogo Tool').html_safe%></h1>

<div class="content_skin">
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
<p><%= _("Please, fill the following form to register and start using the LCAtogo Tool. Once you have completed the form, you will receive a confirmation e-mail to validate your registration").html_safe %>.</p>
<p><%= _("LCA to go will only process your personal data in accordance with the Data Protection Act 1998. The information you provide <b>will not</b> be shared with third parties and will be stored electronically. LCA to go may contact you directly about exclusive LCA to go project opportunities up to 12 months after signing up.").html_safe %>.</p> 
<p><%= f.check_box :contact_info %> <%= _("Please tick here if you <b>do not</b> want to be contacted by LCA to go").html_safe %>.
 
</p>
<%= _("Fields marked as").html_safe %> <span class='red'>*</span> <%= _("are mandatory.").html_safe %></p>

<br />

<%= devise_error_messages! %>

    <div class="span-5">
        <label><%=_('Name').html_safe %></label><span class="red"> *</span><br/>
        <div>
          <%= f.text_field :name, :size => 20 %><br/>
        </div>  
        <div></div>
    </div>

    <div class="span-5">
        <label><%=_('Surname').html_safe %></label><span class="red"> *</span><br/>
        <div>
           <%= f.text_field :surname, :size => 20 %>
        </div>
        <div></div>        
    </div>

    <div class="span-5">
        <label><%=_('Organization').html_safe %></label><span class="red"> *</span><br/>
        <div>
           <%= f.text_field :organization, :size => 42  %>
        </div> 
        <div></div>        
    </div>

    <div class="clear"></div>

    <div class="span-5">
      <label><%=_('Default Industrial Sector').html_safe %></label><span class="red"> *</span><br/>
      <div>
	      <select name="user[sector]" id="user_sector" class="span-4">
	        <option value=""></option>
	        <option value="bio_based"><%=_('Bio-based plastics').html_safe%></option>
	        <option value="industrial"><%=_('Industrial machines').html_safe%></option>
	        <option value="electronics"><%=_('Electronics').html_safe%></option>
	        <option value="printed"><%=_('Printed Circuit Boards').html_safe%></option>
	        <option value="renewable"><%=_('Renewable Energy - Photovoltaics').html_safe%></option>
	        <option value="semiconductors"><%=_('Semiconductors').html_safe%></option>
	        <option value="sensors"><%=_('Sensors').html_safe%></option>
	        <option value="textiles"><%=_('Smart Textiles').html_safe%></option>
	      </select>
      </div>
      <div></div>      
    </div>

    <div class="span-5">
      <label><%=_('Main activity').html_safe %></label><span class="red"> *</span><br/>
      <div>
	      <select name="user[activity]" id="user_activity" class="span-4">
	        <option></option>
	        <option value="manufacturing_production"><%=_('Manufacturing / Production').html_safe%></option>
	        <option value="services_private_sector"><%=_('Services - private sector').html_safe%></option>
	        <option value="services_public_sector"><%=_('Services - public sector').html_safe%></option>
	        <option value="academic_research"><%=_('Academic / Research').html_safe%></option>
	        <option value="other"><%=_('Other (please specify)').html_safe%></option>
	      </select>
      </div>
      <div></div>      
    </div>

    <style> #user_other_main_activity{margin-top:19px;}</style>

    <div class="span-5">
      <%= f.text_field :other_main_activity, :size => 42 , :class => "other_main_activity"%>
    </div>

    <div class="clear"></div>

    <div class="span-10">
        <label><%=_('Postal address').html_safe %></label><br/>
        <%= f.text_field :postal, :size => 45 %>
    </div>

    <div class="span-4">
        <label><%=_('Phone number').html_safe %></label><span class='red'>*</span><br/>
        <div>
          <%= f.text_field :phone, :size => 14 %>
        </div>
        <div></div>
    </div>

    <div class="span-5">
        <label><%=_('Country').html_safe %></label><br/>
        <div>
           <%= f.select :country_id, @countries.map {|r| [r.name,r.id]}, {:include_blank => true}, {:class=>"span-5"} %>
        </div>   
        <div></div>
    </div>

    <div class="clear"></div>

    <div class="span-7 last">
    <label><%=_('Default Language').html_safe %></label><span class="red"> *</span><br/>
        <select name="user[language]" id="user_language">
            <option value="english"><%=_('English').html_safe%></option>
            <option value="spanish"><%=_('Spanish').html_safe%></option>
            <option value="german"><%=_('German').html_safe%></option>
            <option value="polish"><%=_('Polish').html_safe%></option>
            <option value="french"><%=_('French').html_safe%></option>
            <option value="dutch"><%=_('Dutch').html_safe%></option>
        </select>
    </div>

    <div class="clear"></div>
  
    <div class="span-10 last">
        <label><%=_('E-mail').html_safe %></label><span class='red'>*</span><br/>
        <span class="tip_text"><%= _("Your email address and password will be the credentials for the site.").html_safe %></span><br/>
        <div>
          <%= f.text_field :email, :size => 45 %>
        </div>  
        <div></div>
    </div>

    <div class="clear"></div>

    <div class="span-5">
        <label><%=_('Password').html_safe %></label><span class='red'>*</span><br/>
        <div>
          <%= f.password_field :password, :size => 20 %>
        </div>  
        <div></div>
    </div>

    <div class="span-5 last">
        <label><%=_('Password confirmation').html_safe %></label><span class='red'>*</span><br/>
        <div>
          <%= f.password_field :password_confirmation, :size => 20 %>
        </div> 
        <div></div>  
    </div>

    <div class="clear"></div>

    <h2><%= _("Additional Information").html_safe %></h2>
    <p><%= _("* Have you ever undertaken (or commissioned) any of the following activities? (Please tick all that apply)").html_safe %></p>

    <div class="span-20">
        <% @first_answers.each do |fa| %>
            <% if fa.name_en == "Other (please specify)" %>
                <%= check_box_tag "user[user_first_answer_ids][]", fa.id, false, :class => "checkbox_first_answer" %> <%= fa.name %> <br />
            <% else %>
                <%= check_box_tag "user[user_first_answer_ids][]", fa.id %> <%= fa.name %> <br />
            <% end %>
        <% end %>
    </div>

    <div class="clear"></div>
    <div class="span-5" style="margin-bottom:-25px">
        <%= f.text_field :other_first_answer, :size => 40 %>
    </div>

    <div class="clear"></div>
    <br />
    <p><%= _("* Where did you hear about LCA to go? (Please tick all that apply)").html_safe %></p>

    <div class="span-20">
      <% @second_answers.each do |sa| %>
        <% if sa.name_en == "Other (please specify)" %>
          <%= check_box_tag "user[user_second_answer_ids][]", sa.id, false, :class => "checkbox_second_answer" %> <%= sa.name %> <br />
        <% else %>
          <%= check_box_tag "user[user_second_answer_ids][]", sa.id %> <%= sa.name %> <br />
        <% end %>
      <% end %>
    </div>

    <div class="clear"></div>
    <div class="span-5" style="margin-bottom:-25px">
       <%= f.text_field :other_second_answer, :size => 40 %>
    </div>

    <div class="clear"></div>
    <br />
    <p><%= _("* What motivates you to use LCA to go? (Please tick all that apply)").html_safe %></p>

    <div class="span-20">
      <% @third_answers.each do |ta| %>
        <% if ta.name_en == "Other (please specify)" %>
          <%= check_box_tag "user[user_third_answer_ids][]", ta.id, false, :class=>"checkbox_third_answer" %> <%= ta.name %> <br />
        <% else %>
          <%= check_box_tag "user[user_third_answer_ids][]", ta.id %> <%= ta.name %> <br />
        <% end %>
      <% end %>
    </div>

    <div class="clear"></div>
    <div class="span-5" style="margin-bottom:-25px">
        <%= f.text_field :other_third_answer, :size => 40 %>
    </div>

    <div class="clear"></div>
    <br />
    <p><%= _("Would you like to find out more about free one-to-one training available? ").html_safe %></p>

    <select name="user[free_training]" id="user_free_training">
        <option></option>
        <option value="yes"><%=_('Yes').html_safe%></option>
        <option value="no"><%=_('No').html_safe%></option>
    </select>


    <div class="buttons span-23 last">
        <button type="submit" class="positive"> <%= image_tag 'tick.png' %><%= _("Register").html_safe %></button>
    </div>

<% end %>


</div>
